<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScreenRecord.in</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>ScreenRecord.in</h1>
        <p>Record your screen, camera, and audio ‚Äì all local, no backend.</p>
        <button id="new-recording">New Recording</button>
        <button id="toggle-sidebar">üìÅ Saved</button>
    </header>

    <main id="main-content">
        <section id="recording-controls" class="panel">
            <h2>Recording Controls</h2>
            <div class="config-toggles">
                <label><input type="checkbox" id="screen-toggle"> Screen Share</label>
                <label><input type="checkbox" id="camera-toggle"> Camera</label>
                <label><input type="checkbox" id="mic-toggle"> Microphone</label>
                <label><input type="checkbox" id="system-audio-toggle"> System Audio</label>
            </div>
            <div id="config-summary"></div>
            <button id="start-recording" disabled>Start Recording</button>
            <div id="pip-info" class="pip-info hidden">
                <p>üí° <strong>Keep recording active:</strong> Modern browsers pause camera/screen recording when the tab is not focused. Enable Picture-in-Picture mode to maintain continuous recording.</p>
                <button id="enable-pip" class="pip-btn">Enable Picture-in-Picture</button>
                <button id="enable-popup" class="pip-btn pip-btn-secondary">Open Popup (Fallback)</button>
            </div>
        </section>

        <section id="preview-area" class="hidden">
            <video id="preview-video" autoplay muted playsinline></video>
            <div id="recording-timer" class="recording-timer">00:00</div>
            <div id="paused-overlay" class="paused-overlay hidden">
                <span class="paused-text">‚è∏ PAUSED</span>
            </div>
            <div id="recording-controls-overlay">
                <button id="pause-recording" class="prominent" style="display: none;">‚è∏ Pause</button>
                <button id="stop-recording" class="prominent" style="display: none;">‚èπ Stop</button>
            </div>
        </section>

        <section id="error-notifications"></section>
    </main>

    <aside id="sidebar">
        <h2 id="saved-list-header">Saved Recordings</h2>
        <div id="saved-list">
            <p class="empty-state">No recordings yet. Start your first one!</p>
        </div>
        <button id="load-more-btn" style="display: none;">Load More</button>
        <button id="clear-all">Clear All</button>
        <button id="close-sidebar" class="close-sidebar">&times;</button>
    </aside>

    <div id="modal-player" class="modal hidden">
        <div class="modal-content">
            <span class="close">&times;</span>
            <video id="modal-video" controls></video>
        </div>
    </div>

    <footer>
        <div class="storage-visualization">
            <div class="storage-header">
                <span>Storage Usage</span>
                <span id="storage-info">0 MB / 0 MB</span>
            </div>
            <div class="storage-progress-container">
                <div id="storage-progress-bar" class="storage-progress-bar"></div>
            </div>
            <div id="storage-warning" class="storage-warning hidden"></div>
            <div class="storage-actions">
                <button id="download-last">Download Last</button>
                <button id="cleanup-storage">Cleanup Suggestions</button>
            </div>
            <div id="cleanup-suggestions" class="cleanup-suggestions hidden"></div>
        </div>
    </footer>

    <!-- Keyboard Shortcuts Info Icon -->
    <button id="shortcuts-info-btn" class="shortcuts-info-btn" title="Keyboard Shortcuts">‚ÑπÔ∏è</button>

    <!-- Keyboard Shortcuts Cheat Sheet Modal -->
    <div id="shortcuts-modal" class="shortcuts-modal hidden">
        <div class="shortcuts-content">
            <span class="shortcuts-close">&times;</span>
            <h2>Keyboard Shortcuts</h2>
            <div class="shortcuts-list">
                <div class="shortcut-item">
                    <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>R</kbd>
                    <span class="shortcut-desc">Start/Stop Recording</span>
                </div>
                <div class="shortcut-item">
                    <kbd>Space</kbd>
                    <span class="shortcut-desc">Pause/Resume (when recording)</span>
                </div>
                <div class="shortcut-item">
                    <kbd>Esc</kbd>
                    <span class="shortcut-desc">Cancel/Stop Recording</span>
                </div>
                <div class="shortcut-item">
                    <kbd>Ctrl</kbd> + <kbd>S</kbd>
                    <span class="shortcut-desc">Save Current Recording</span>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>